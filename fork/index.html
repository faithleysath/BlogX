<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>我的博客</title>
    <!-- 导入字体 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=LXGW+WenKai+TC&family=Noto+Sans+SC:wght@100..900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet">
    <!-- 自定义样式 -->
    <link rel="stylesheet" href="css/main.css">
    <!-- 导入 KaTeX -->
    <link rel="stylesheet" href="plugin/katex/katex.min.css">
    <script defer src="plugin/katex/katex.min.js"></script>
    <script defer src="plugin/katex/contrib/auto-render.min.js" onload="renderMathInElement(document.body, {
        delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '\\[', right: '\\]', display: true},
            {left: '$', right: '$', display: false},
            {left: '\\(', right: '\\)', display: false}
        ],
        macros: {
            '\\R': '\\mathbb{R}',  // 实数符号
            '\\N': '\\mathbb{N}',  // 自然数符号
            '\\Z': '\\mathbb{Z}',  // 整数符号
            '\\ge': '\\geqslant',  // 大于等于符号
            '\\le': '\\leqslant',  // 小于等于符号
            '\\geq': '\\geqslant', // 大于等于符号（另一种写法）
            '\\leq': '\\leqslant'  // 小于等于符号（另一种写法）
        }
    });"></script>
    <script defer src="plugin/katex/contrib/copy-tex.min.js"></script>
    <!-- 导入 highlight.js -->
    <link rel="stylesheet" href="plugin/highlight/styles/vs2015.min.css">
    <script src="plugin/highlight/highlight.min.js"></script>
    <!-- 导入fa icon -->
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.6.0/css/all.css" rel="stylesheet">
    <!-- 导入代码高亮样式 -->
    <link rel="stylesheet" href="css/code-box.css">
</head>
<body>
    <main>
        <article>
            <h1>代码高亮示例</h1>
            <p>这是实数的符号：$\R$</p>
            <p>这是自然数的符号：$\N$</p>
            <p>这是大于等于的符号：$x \ge 0$</p>
            <p>这是小于等于的符号：$y \le 1$</p>
            <p>这是一个数学公式：$$x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$$</p>
            <p>这是一个数学公式：\[\int_0^1 x^2 \, dx\]</p>
            <p>是日，会选民于宾州，有贼伏屋刺之，伤王耳。众惊惧，左右避之，皆恐不已。少顷王起，怒振臂，血染颊，三呼战于旗下。民奋然，众呼：大美兴，川普王。天下云集响应，赢票而影从。攻内华达，北卡，密歇根，接下之。比至华府，票四五百张，支持率八成余，maga数亿人。拜登与民主党众力拒之，合众议员，宛若虎狼，力图扭转。然川普大势已成，得共和党忠臣辅佐，彭斯、蓬佩奥等皆为左右手，谋划深远。各州选战如火如荼，川普之声震天，拜登虽竭力辩驳，终难敌其锋芒。及至十一月，选举结果揭晓，川普再度登临大位。民众欢呼雀跃，红帽如潮，街道巷陌皆闻"MAGA"之声。拜登虽心有不甘，亦难违民意，黯然退居一隅。天下归心，川普王临，四海升平，万邦来朝。</p>

            <h2>Python 示例</h2>
            <div class="code-box">
                <button class="copy-button" onclick="copyToClipboard()">
                    <i class="fa-regular fa-copy" id="copy-icon"></i>  <!-- 添加 id -->
                </button>
                <ul class="number-line"></ul>
                <pre><code class="language-python">import math
def calculate_area(radius):
    return math.pi * radius * radius
area = calculate_area(5)
print(f"圆的面积是: {area:.2f}")</code></pre>
            </div>
        </article>
        <aside class="sidebar">
            <h2>快捷</h2>
            <ul>
                <li><a href="#">主页</a></li>
                <li><a href="#">手帐</a></li>
                <li><a href="#">关于我</a></li>
                <li><a href="#">我的 Notion 笔记本</a></li>
            </ul>
            <h2>伙伴</h2>
            <ul>
                <li><a href="https://www.chiro.work/">Chiro</a></li>
                <li><a href="#">SignKirimagi</a></li>
                <li><a href="#">Nanguobean</a></li>
                <li><a href="#">Black</a></li>
            </ul>
        </aside>
    </main>
    <script>
        hljs.highlightAll(); // 初始化高亮

        // 添加行号
        const codeBoxes = document.getElementsByClassName('code-box');
        for (const codeBox of codeBoxes) {
            const numberUL = codeBox.getElementsByClassName('number-line')[0];
            const codeLines = codeBox.getElementsByTagName('code')[0].innerText.split('\n');
            for (let i = 1; i <= codeLines.length; i++) {
                const li = document.createElement('li');
                li.innerText = i;
                numberUL.appendChild(li);
            }
        }

        // 复制到剪贴板的函数
        function copyToClipboard() {
            const code = document.querySelector('.code-box code').innerText; // 获取不带行号的代码
            const copyIcon = document.getElementById('copy-icon'); // 获取图标元素
            const button = document.querySelector('.copy-button'); // 获取按钮元素

            navigator.clipboard.writeText(code).then(() => {
                copyIcon.classList.remove('fa-regular');
                copyIcon.classList.add('fa-solid'); // 使用实心图标表示成功
                setTimeout(() => {
                    copyIcon.classList.remove('fa-solid');
                    copyIcon.classList.add('fa-regular');
                }, 1500);
            }).catch(err => {
                console.error('复制失败：', err);
                copyIcon.classList.remove('fa-copy');
                copyIcon.classList.add('fa-times'); // 使用叉号图标表示失败
                setTimeout(() => {
                    copyIcon.classList.remove('fa-times');
                    copyIcon.classList.add('fa-copy');
                }, 1500);
            });
        }

        // 将站外链接在新标签页打开，通过修改 target 属性
        for (const a of document.getElementsByTagName('a')) {
            if (a.href.startsWith('http') && !a.href.startsWith(location.origin)) {
                a.target = '_blank';
                a.rel = 'noopener noreferrer';
            }
        }
    </script>
</body>
</html>
